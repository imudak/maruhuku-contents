# Claude Code: API認証 vs Proプラン比較ガイド

## 概要

Claude CodeとAPI経由のClaude利用の違い、および認証方法による使い分けについてまとめたガイドです。

## Claude Code と API利用の違い

### Claude Code（コマンドラインツール）
- ターミナルから直接コーディングタスクを委譲できるAnthropicの専用ツール
- ProプランまたはMaxプランの契約、あるいはAPI経由での利用（従量課金）が必要
- Freeプランでは利用不可（サブスクリプション認証の場合）

### Claude API（API経由）
- 従量課金制で、誰でも利用可能
- VSCodeの拡張機能などから、APIキーを設定して使用
- claude.aiのFreeプランとは独立した課金体系

**重要**: VSCodeでAPIキーを使ってClaudeを利用している場合、これは「Claude APIを直接利用している状態」であり、「Claude Code」というツールを使っているわけではありません。

## 料金比較

### Claude Code（サブスクリプション経由）

#### Proプラン
- **月額**: $17（年払いなら実質$16.67）
- **利用量**: 約6,480-6,696メッセージ/月
- **対象**: コーディングと非コーディングタスクを混在して使う軽めのユーザー向け

#### Maxプラン
- **月額**: $100-$200
- **利用量**: Proよりはるかに高い利用制限
- **特典**: Opus 4へのアクセス含む

### Claude API（従量課金）

#### 料金
- **Sonnet 4.5**: 入力$3/出力$15 per 100万トークン
- **Opus 4.5**: 入力$5/出力$25 per 100万トークン

#### コスト実例
- 毎日コーディングする開発者の場合、API利用だと月約$9.18程度でPro（$20/月）より安い
- ただし、Claude Codeの呼び出しは通常のチャットより重く、大量のシステム命令、ファイルコンテキスト全体、長い出力が含まれる

## 機能比較

### Claude Code専用の機能

1. **自律的なコーディングエージェント**
   - ターミナル内で動作
   - コードベースの自動理解
   - 自然言語コマンドで日常的なタスクを実行
   - 複雑なコードの説明
   - gitワークフローの処理
   - 複数セッションにわたる自律的開発

2. **組み込み機能**
   - プロジェクトコンテキストの自動理解
   - カスタムスラッシュコマンド（`.claude/commands`フォルダ）
   - MCPサーバー統合
   - GitHub統合（PR作成、イシュー処理など）
   - フックシステム（セッション開始前/後、ツール使用前/後など）

3. **プロジェクト管理機能**
   - タスクチェックリストの自動管理
   - 進捗の永続化（CLAUDE.mdファイル）
   - コンテキスト圧縮の自動トリガー

### VSCode + API の場合
- 拡張機能の機能に依存（Cline、Cursor、Claude Coderなど）
- より柔軟だが、自分で統合を設定する必要がある
- レート制限が異なる（API直接の方が予測可能）

## 認証方法による違い

### Freeプランの真実

**公式見解**: Freeプランは「Claude Codeアクセスをサポートしていない」

**実態**: API認証を使えば、Freeユーザーでも全機能が利用可能

### 認証方法の比較

#### サブスクリプション認証（Pro/Max）
- 固定月額料金
- claude.aiと使用量を共有
- 5時間ごとにリセットされるセッション制限
- 約44,000トークン/5時間（Pro）
- 週次制限: 平均的なProユーザーはSonnet 4で週40-80時間程度
- 制限到達時に即座にブロックされる

#### API認証（従量課金）
- トークンごとに課金
- claude.aiとは独立した使用量
- レート制限（RPM/TPM）のみ
- トークン制限なし（レート制限内で自由に使用可能）

### 重要な発見

**機能面の違いは実質ありません**。どちらの認証方法でも、Claude Codeの全機能（カスタムコマンド、MCP、GitHub統合など）が利用可能です。

制限されるのは**機能ではなく、使用量**のみです。

## どちらを選ぶべきか

### API認証のままが良い場合

1. **軽めの使用**（週10-20時間以下）
   - コスト効率が良い
   - 週$10-15程度なら、Pro（$20/月）より安い

2. **使用量が予測不可能**
   - 忙しい週とそうでない週がある
   - 制限を気にせず使いたい

3. **自由な時間に使いたい**
   - Proの5時間リセットを気にする必要がない
   - 夜中や早朝の作業でも問題なし

### Proプランが良い場合

1. **毎日コンスタントに使う**（週40時間以上）
   - 1日20ドル使うような場合、月600ドルになるがPro契約なら月20ドルで済む
   - API課金が月$20を超える見込みならProが得

2. **claude.aiもヘビーに使う**
   - Claude CodeとWebの両方を頻繁に使うなら、統合された使用量が便利

3. **予算を固定したい**
   - 「Extra usage」機能で使用量上限を設定可能
   - 思わぬ高額請求を避けられる

## 実際の使用例

### ユーザー報告より
- 「4時間の使用量が3プロンプトで消えた。プランモードでフロントエンド設計をリファクタリングした」
- Opus 4.5に切り替えると「セッションがSonnetよりはるかに速く消費される」
- 大規模なリファクタリングやコードレビューは想像以上にトークンを消費する

## 推奨アプローチ

### まずはAPI認証のままで様子を見る

1. **1ヶ月間APIコストを追跡**
   - Console（console.anthropic.com）でトークン使用量を確認
   - 月$20を超えそうならProを検討

2. **使用パターンを観察**
   - 毎日均等に使う → Pro向き
   - 週末や特定の日に集中 → API向き
   - 時間帯が不規則 → API向き

3. **制限に引っかかるか確認**
   - API認証なら基本的に制限なし
   - Proだと制限到達時に即座にブロックされる

## まとめ

### 料金面
- **ライトユーザー**: API直接の方が安い可能性が高い
- **ヘビーユーザー**: サブスクリプション（Pro/Max）の方がお得
- Claude Codeはトークン消費が多いため、実際のコストは使用パターンに大きく依存

### 機能面
- **Claude Code**: 完全統合された自律的開発環境、チーム向けの標準化されたワークフロー
- **VSCode + API**: より柔軟で、使用する拡張機能次第で機能が変わる

### 結論

**現在問題なく使えているなら、API認証で継続するのが最も柔軟です。** 月$20を大幅に超える使用量になった時点で、Proへの切り替えを検討すれば良いでしょう。

---

*最終更新: 2026年1月*