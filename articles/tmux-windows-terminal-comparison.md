---
title: "tmuxとWindows Terminal、何が違う？セッション永続化の魅力"
emoji: "🖥️"
type: "tech"
topics:
  - tmux
  - windowsterminal
  - wsl
  - terminal
  - linux
published: true
---

## tmuxとは

**tmux**はターミナルマルチプレクサと呼ばれるツールで、1つのターミナルで複数のセッションを管理できます。

Windows Terminalにもタブやペイン分割の機能がありますが、tmuxには決定的に異なる点があります。それが「セッション永続化」です。

## インストール方法

各ディストリビューションでのインストール方法は以下の通りです。

### Ubuntu/Debian系

```bash
sudo apt update && sudo apt install -y tmux
```

### Fedora/RHEL系

```bash
sudo dnf install tmux
```

### Arch Linux

```bash
sudo pacman -S tmux
```

## 基本的な使い方

| コマンド | 説明 |
|---------|------|
| `tmux` | 新しいセッションを開始 |
| `tmux new -s 名前` | 名前付きセッションを開始 |
| `tmux ls` | セッション一覧を表示 |
| `tmux attach -t 名前` | セッションに再接続 |
| `Ctrl+b d` | セッションからデタッチ（切り離し） |
| `Ctrl+b %` | 画面を縦に分割 |
| `Ctrl+b "` | 画面を横に分割 |

## Windows Terminalとの比較

| 機能 | Windows Terminal | tmux |
|------|------------------|------|
| タブ/ウィンドウ分割 | ○ | ○ |
| 複数ペイン | ○ | ○ |
| セッション永続化 | ✕ | ○ |
| デタッチ/再接続 | ✕ | ○ |
| リモートでの利用 | ✕ | ○ |

見た目の機能は似ていますが、下3つの機能がtmuxにしかありません。

## 決定的な違い：セッション永続化

### Windows Terminalの場合

- ターミナルを閉じるとプロセスも全部終了する
- PCを再起動すると作業状態は消える

### tmuxの場合

- `Ctrl+b d`でデタッチするとプロセスはバックグラウンドで継続する
- ターミナルを閉じても`tmux attach`で元の状態に戻れる
- 長時間かかるビルドやサーバーを動かしたまま離席できる

この違いは実際に使ってみると想像以上に大きいです。

## tmuxが特に役立つ場面

1. **SSHでリモートサーバーに接続している時** - 接続が切れても作業が失われない
2. **長時間のタスク実行中** - ターミナルを閉じても処理は継続する
3. **ペアプログラミング** - 同じセッションを複数人で共有できる

## Windows Terminal + WSL + tmuxの組み合わせ

この3つの組み合わせは相性が良いです。

- SSHやWSLのセッションが切れてもtmuxセッションは生き続ける
- Windows Terminalを閉じても、再度`tmux attach`で作業を再開できる
- 複数のペイン（分割画面）を1つのタブで管理できる

### マウス操作を有効にする

デフォルトではマウスでペインの選択やスクロールができません。以下を`~/.tmux.conf`に追加すると有効になります。

```bash
set -g mouse on
```

## 自分のプロジェクトはWSLに移行すべきか

tmuxの便利さはわかりましたが、ここで気になったのが「自分のプロジェクトはWSLに移行すべきか」という点です。

検討した結果、**無理に移行しないことにしました**。

### 開発対象別に考えてみる

| 開発対象 | 向いている環境 |
| --- | --- |
| Windowsアプリ（.NET、WPF等） | Windows |
| スマホアプリ（Flutter、React Native） | Windows（エミュレータ連携が楽） |
| Web開発、Linux向け開発 | WSLが便利 |
| 記事執筆、ドキュメント管理 | どちらでも可 |

自分の場合、WindowsアプリやFlutterでのスマホアプリ開発もしているので、エミュレータやデバッガとの連携を考えるとWindows上のほうが良さそうです。

### 移行を検討するとしたら

以下のような不便を感じたら、その時に検討すればいいと思いました。

- ターミナルを閉じて作業が消えて困った
- SSH接続が切れて作業が失われた
- 長時間のビルド中にPCから離れられない

今のところこれらの問題に直面していないので、現状維持で進めることにしました。

### 自分が考えた選択肢

1. **現状維持** - 今はこれ
2. **併用** - Linux系ツール（Docker等）だけWSLで実行し、Windows固有の開発はWindows上で継続
3. **部分的にtmux導入** - WSL内でサーバーを動かす時だけtmuxを使う

「困ってから検討する」方針で進めます。

## まとめ

- ローカルで短時間の作業だけならWindows Terminalのタブで十分
- WSL内で長時間動かすプロセスがある場合や、リモートサーバーで作業する場合はtmuxが便利
- 自分はWindowsアプリやスマホアプリ開発もしているので、Windows上で開発を続けることにした

両方の特性を理解して使い分けていきます。
