---
title: "ミニPCをヘッドレスサーバーにする手順（モニター・キーボードなしで運用）"
emoji: "🖥️"
type: "tech"
topics:
  - minipc
  - windows
  - remotedesktop
  - server
published: true
---

## はじめに

前回の記事で、VPSと自宅ミニPCのコスト比較をしました。長期運用ならミニPCの方が安いです。

https://zenn.dev/maruhuku/articles/vps-vs-minipc-server-cost

今回は、購入したミニPCを「ヘッドレスサーバー」として運用するための設定手順をまとめます。ヘッドレスとは、モニターやキーボードを接続せずに運用する形態のことです。

## 前提条件

- Windows 11 Pro搭載のミニPC（Homeではリモートデスクトップのホスト機能が使えない）
- 同じネットワーク内に操作用のPC（Windows/Mac）がある
- 初期設定時のみ、マウスとモニター（またはテレビ）が必要

## 初期設定：最初の1回だけ必要なもの

ミニPCを箱から出してすぐにリモート接続することはできません。リモートデスクトップを有効化するために、最初の1回だけ以下のどちらかが必要になります。

### 方法1: テレビをモニター代わりにする（推奨）

家にあるテレビにHDMIで接続し、100均で買った有線マウス（300〜500円程度）で操作します。リモートデスクトップを有効化したら、マウスは引き出しにしまって終わりです。

### 方法2: 出荷時設定に賭ける

運が良ければ、メーカー出荷時にリモートデスクトップが有効化されている場合があります。ミニPCをLANケーブルで接続し、別のPCから接続を試してみる価値はあります。ただし、ほとんどの場合は無効になっています。

## リモートデスクトップの有効化手順

### ミニPC側（操作される側）

1. **[スタート]** > **[設定]**（歯車アイコン）を開く
2. 左メニューの **[システム]** > **[リモート デスクトップ]** をクリック
3. **[リモート デスクトップ]** のスイッチを **[オン]** にする
4. **[PC 名]**（例: `DESKTOP-XXXXX`）をメモしておく

### 操作する側のPC

1. Windowsの検索で「リモート デスクトップ接続」と入力してアプリを起動
   - 見つからない場合は `Win + R` で `mstsc` と入力
2. **[コンピューター]** 欄にミニPCの **[PC 名]** を入力して **[接続]**
3. ユーザー名とパスワードを入力してログイン

これで、ミニPCの画面が手元のPCに表示されます。

## HDMIダミープラグの必要性

ヘッドレス運用で発生しやすい問題があります。ミニPCは「モニターが繋がっていない」と判断すると、解像度が極端に低くなり、リモートデスクトップが非常に重くなることがあります。

### 解決策

**HDMIダミープラグ**をミニPCのHDMI端子に挿しておきます。Amazonで数百円で購入できます。これを挿すことで、ミニPCは「モニターが接続されている」と認識し、正常な解像度で動作します。

## キーボード配列問題の解決

リモートデスクトップで接続すると、キー配列が英語（US）になっていることがあります。物理キーボードは日本語（JIS）なのに、`@`や`"`などの記号が正しく入力できない状態です。

### 解決手順

1. 接続先PCの **[設定]** > **[時刻と言語]** > **[言語と地域]** を開く
2. 「日本語」の横にある **[...]** から **[言語のオプション]** を選択
3. **[キーボード]** セクションにある **[レイアウトを変更する]** をクリック
4. **[日本語キーボード (106/109キー)]** を選択してOK
5. 一度サインアウトするか、再起動する

### 上記で直らない場合（レジストリ修正）

RDP経由だと設定が反映されにくいことがあります。その場合はレジストリを直接修正します。

1. `Win + R` で `regedit` と入力
2. `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\i8042prt\Parameters` を開く
3. 以下の値を確認・修正

| 値の名前 | 設定値 |
|----------|--------|
| LayerDriver JPN | `kbd106.dll` |
| OverrideKeyboardIdentifier | `PCAT_106KEY` |
| OverrideKeyboardSubtype | `2` |
| OverrideKeyboardType | `7` |

### 一時的な対処法

設定が直るまでの間、以下の対応で記号を入力できます。

| 入力したい文字 | US配列での入力方法 |
|----------------|-------------------|
| @              | `Shift + 2`       |
| "              | `Shift + '`       |
| :              | `Shift + ;`       |

## 外部からの接続：シン・テレワークシステム

自宅内のネットワークからはリモートデスクトップで接続できますが、外出先から接続するには追加の設定が必要になります。

NTT東日本とIPAが共同で提供している**シン・テレワークシステム**を使えば、ルーターのポート開放や固定IPなしで、外出先から自宅のミニPCに接続できます。

### シン・テレワークシステムのメリット

- ルーターのポート開放が不要
- 固定IPが不要
- IPA（情報処理推進機構）とNTT東日本の共同開発で信頼性が高い
- 無料で利用可能（2026年3月31日まで延長中）

### 導入手順

1. 自宅のミニPCにサーバー設定ユーティリティをインストールし、「接続用ID」と「パスワード」を設定
2. 外出先のPCにクライアントソフトウェアをインストールし、IDとパスワードを入力して接続

公式サイト: https://telework.cyber.ipa.go.jp/

### 注意点

ミニPCがスリープに入ると外から繋げなくなります。Windowsの電源設定で「スリープなし」にしておいてください。

また、シン・テレワークでも前述のキーボード配列問題が発生しやすいです。クライアント側の設定で「キーボードレイアウトの自動認識」をオフにし、明示的に「日本語 (Japanese Keyboard)」を指定します。

## まとめ

ミニPCをヘッドレスサーバーとして運用するためのポイントをまとめます。

1. 初期設定時のみ、テレビ＋マウスで直接操作してリモートデスクトップを有効化
2. HDMIダミープラグで解像度問題を回避
3. キーボード配列は日本語（106/109キー）に設定
4. 外部からの接続にはシン・テレワークシステムが便利

次回は、このミニPC上でWSL2を動かし、外部からSSH接続できるようにする方法を紹介する予定です。
