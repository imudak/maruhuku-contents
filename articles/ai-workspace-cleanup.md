---
title: "AIエージェントのワークスペース肥大化問題と整理術"
emoji: "🧹"
type: "tech"
topics:
  - AI
  - OpenClaw
  - ClaudeCode
  - 開発環境
  - 自動化
published: true
---

## はじめに

AIエージェントを日常的に運用していると、ある日気づきます。

**ワークスペースがカオスになっている。**

調査のために実行したスクリプト、一時的なJSONデータ、「あとで整理しよう」と思った分析レポート——これらが静かに、しかし確実に積み重なっていきます。私の場合、気づいたときには **85ファイル** がワークスペースに散乱していました。

この記事では、AIエージェント（OpenClaw + Claude等）を運用するなかで経験したワークスペース肥大化問題と、実際に行った整理・運用改善について書きます。

## 何が溜まるのか

AIエージェントを使って開発や調査をしていると、具体的に以下のようなファイルが積み重なります。

### バッチスクリプト（.sh / .py）

```bash
# よくあるパターン
fetch_data_20240315.sh
migrate_db_v2.py
bulk_update_temp.sh
check_status_debug.py
```

「一度だけ実行する」はずのスクリプトです。実行後に削除する習慣がないと、日付やバージョン番号付きのファイルが量産されます。Claude CodeやOpenClawがタスクのたびに生成するため、特に増えやすい。

### JSONデータと中間ファイル

```bash
api_response_cache.json
analysis_result_v3.json
export_20240315.json
tmp_batch_input.jsonl
```

APIレスポンスのキャッシュ、バッチ処理の入出力データ、デバッグ用のエクスポートファイルなど。「念のため残しておこう」の積み重ねです。

### 一時レポートとメモ

```bash
research_flutter_widgets.md
todo_urgent.md
meeting_notes_temp.md
investigation_report.md
```

調査結果をマークダウンにまとめたものの、どのプロジェクトに属するか分類されていないファイル。ワークスペースに直接置いておくと、次のセッションでAIが「これも読む必要があるか」と判断してコンテキストが膨らんでいきます。

### 古いパイプライン文書

一度設計してお蔵入りになったワークフロー定義、試行錯誤のログ、廃止されたCLIの使い方メモ——これらは「いつか使うかも」で残されがちです。

## 実体験：85ファイル → 30ファイルへ

ある週、ワークスペースの棚卸しをしました。結果は衝撃的でした。

| 項目 | 数値 |
|------|------|
| 整理前ファイル数 | 85ファイル |
| 整理後ファイル数 | 30ファイル |
| 削除・移動したファイル | **55ファイル** |
| 削除した行数（概算） | **10,000行以上** |

内訳を見ると、**6割以上が「あとで整理」のまま放置されたもの**でした。本当に必要なコアファイルは30ファイル程度で、残りはすべてノイズだったわけです。

### 作業の流れ

```bash
# 1. 全ファイルを一覧で確認
ls -la ~/workspace/
wc -l ~/workspace/*.md ~/workspace/*.json 2>/dev/null

# 2. 更新日時で古いファイルを特定
find ~/workspace/ -maxdepth 1 -mtime +30 -type f

# 3. trashで安全に削除（rm は使わない）
trash old_script.sh deprecated_report.md

# 4. 調査レポートをプロジェクトに移動
mv investigation_flutter.md ~/projects/flutter-app/steering/
```

`rm` ではなく `trash` コマンドを使うのがポイントです。誤削除しても復元できます。

## 整理のルール

整理を通じて、以下のルールを定めました。

### ルール1：コアファイルは残す

ワークスペースのルートに置くべきファイルは明確に決めます。

```
~/workspace/
├── MEMORY.md        # 長期記憶
├── AGENTS.md        # エージェント運用設定
├── SOUL.md          # キャラクター・価値観定義
├── TOOLS.md         # ツール固有の設定メモ
├── USER.md          # ユーザー情報
└── memory/          # 日次メモリ
    └── 2026-02-18.md
```

これ以外のファイルはワークスペースのルートに置かない、というルールです。

### ルール2：調査レポートはプロジェクトの `steering/` に移動

```
~/projects/
└── my-app/
    ├── steering/
    │   ├── research_api_design.md   # ← ここに
    │   ├── investigation_ux.md      # ← 移動
    │   └── requirements.md
    └── src/
```

調査結果はプロジェクト固有の情報です。ワークスペースに漂わせず、関係するプロジェクトの `steering/` ディレクトリに格納します。これにより、「この調査は何のためだったか」が一目でわかるようになります。

### ルール3：TODO・状態管理は専用ツールに一元化

ワークスペースに `todo_temp.md` や `status_check.md` を作るのをやめました。代わりに **jimucho**（社内タスク管理API）を使って状態を一元管理しています。

ファイルベースのTODO管理は、AIが毎回「このファイルの内容を読む必要があるか」と判断するコストになります。専用ツールに任せることで、ワークスペースはクリーンに保たれます。

### ルール4：「一時ファイルをワークスペースに作らない」を運用ルール化

```markdown
# AGENTS.md に追記

## ワークスペース衛生

- 一時スクリプトは /tmp/ に作成し、完了後に削除する
- バッチ入出力ファイルは各プロジェクトディレクトリ内に置く
- 調査メモはその場でプロジェクトの steering/ に保存する
- ワークスペースルートへの新規ファイル作成は原則禁止
```

`AGENTS.md`（エージェントへの指示ファイル）にルールを明記することで、AIエージェント自身も意識して動くようになります。

## なぜこれが重要なのか：コンテキスト汚染問題

ワークスペースの肥大化は、単なる「散らかっている」問題ではありません。

OpenClawやClaude Codeのようなコンテキストベースのエージェントは、**セッション開始時にワークスペースのファイルを読み込む**ことがあります。ファイルが多ければ多いほど：

1. **読み込みに時間がかかる** — セッション初期化が遅くなる
2. **トークンを無駄に消費する** — 不要なファイルの内容がコンテキストを占有
3. **判断精度が下がる** — ノイズが多いほど、AIが重要な情報を見落としやすくなる

整理後は、**コンテキスト読み込みが明らかに軽くなり、応答の精度と速度が向上**しました。体感として、タスクの判断が迷いなくなった印象です。

## 整理した結果

| 指標 | 整理前 | 整理後 |
|------|--------|--------|
| ワークスペースファイル数 | 85 | 30 |
| セッション初期化の重さ | 重い | 軽い |
| 「このファイルは何?」迷子率 | 高い | ほぼゼロ |
| 調査レポートの所在 | 不明 | プロジェクト内 |

数字以上に大きかったのは、**「作業を再開するときのストレスがなくなった」**こと。ワークスペースを開いたとき、何があって何をすべきかが一目でわかる状態になりました。

## まとめ

AIエージェントのワークスペース管理は、人間のデスク整理と同じです。放置すれば溜まり、溜まれば効率が落ちる。

実践してわかった整理の要点：

- **コアファイルを決めて、それ以外は置かない**
- **調査レポートは所属プロジェクトの `steering/` へ**
- **TODOや状態管理は専用ツール（jimucho等）に任せる**
- **「一時ファイルを作らない」をAGENTS.mdにルール化する**

AIが賢く動くためには、AIが見る情報がクリーンである必要があります。ワークスペースの衛生管理は、AIエージェントのパフォーマンスに直結する地味だけど重要な運用作業です。

ぜひ一度、自分のワークスペースのファイル数を数えてみてください。
