---
title: "AI自律運用10日間の記録（後編）——自律システムのデバッグ日記"
emoji: "🔧"
type: "tech"
topics:
  - Claude
  - AI
  - OpenClaw
  - マルチエージェント
  - 自動化
published: false
---

## 前編のあらすじ

[前編](https://zenn.dev/imudak/articles/hybrid-ai-operation-diary)では、AI自律運用の最初の5日間を書きました。

- プロジェクトが5個から20個に増えた
- 人間が寝ている間にAIが働いていた
- config.apply事件でDiscordトークンが消失した
- 事務総長（flow-manager）が誕生した

そして、**作る速度 > 検証速度**という新しい問題が見えてきました。

この後編では、Day 6-8（2/10〜2/12）の記録を書きます。

前編が「体験記」なら、後編は「デバッグ日記」です。

自律パイプラインが報告してくるのを見て、「あれ？」「これ違うぞ」となって、問題を一つずつ潰していく——そのプロセスがメインです。

## パイプライン暴走——24回実行の狂気

### 2月10日の朝、起きたら

朝起きて、Discordの #自律実行ログ チャンネルを確認しました。

前日の夜から今朝にかけて、パイプライン前倒しジョブが24回実行されていました。

> 23:45 パイプライン前倒し実行
> 00:45 パイプライン前倒し実行
> 01:45 パイプライン前倒し実行
> ...
> 22:45 パイプライン前倒し実行

1時間ごとに。24時間ぶっ通しで。

中身を見ると、ほとんどが「全ステップスキップ条件該当 → Step 2強制実行」という同じパターン。

```
Step 1: 進行中タスクなし
Step 2: 巡回1h前（3h以内）→ スキップ
Step 3: 未処理ネタ元0件 → スキップ
Step 4: 採用枠2/2使用済み → スキップ

→ 全スキップのためStep 2を強制実行
```

実はこれ、AIが勝手に決めたロジックではありません。僕が意図的に入れたルールです。

### 暇な時間がもったいない

パイプラインが何もしない時間ができるのが、なんとなくもったいなかったんです。

> せっかくAIが24時間動いてるのに、「やることありません」で終わるのはもったいない。暇なら巡回くらいしておけ。

そういう発想で、「全ステップがスキップなら、巡回だけでも強制実行する」というルールを入れていました。

結果、1時間ごとにReddit・Product Hunt・はてブを巡回し続ける。ほとんどの巡回でレートリミットか403エラーが返ってきて、実際には何も収集できていないのに、ログだけが延々と積み上がっていく。

ログが増えること自体はそんなに困りません。問題は、**本当に重要な報告が埋もれる**ことでした。深夜にMVPが2つ完成した報告も、大量の「全ステップスキップ→強制巡回」の間に挟まれていて、朝起きてスクロールしないと見つけられなかった。

> **imudak:** うーん、巡回しても何も拾えてないし、ログだけ増えてるな。

> **クロウ候:** 「全ステップスキップ → 終了」というパスを追加するか？

> **imudak:** そうだな。暇なら暇でいいか。

修正後のロジック：

```
if (全ステップがスキップ条件) {
  // 何もせず終了
  logToNotion("全ステップスキップのため何もしない");
  return;
}
```

「AIに暇な時間を許す」という判断をしたわけです。人間だって暇な時間はある。AIも同じでいい。

## 報告を見てデバッグする日々

自律パイプラインが動き始めてから、毎日のように新しい問題が見つかりました。

Cronジョブが報告してくるのを見て、「あれ？」と思う瞬間が何度もありました。

### 問題1: 報告が来ない

> **imudak:** ネタ元巡回の報告、来てないよね？

ログを確認すると、ジョブ自体は実行されていました。でも、Discord通知が失敗していました。

原因は `delivery.to` の設定ミス。

```json
"delivery": {
  "to": "1468429438885691506"  // ❌ チャンネルIDだけ
}
```

正しくはこう。

```json
"delivery": {
  "to": "channel:1468429438885691506"  // ✅ channel: prefix必須
}
```

`channel:` のプレフィックスが欠けていたせいで、OpenClawが「Ambiguous recipient」エラーを出していました。

ネタ元巡回・アイデア変換・自動採用の3ジョブで同じミスが発生していました。全部修正。

### 問題2: 同じ時刻に複数実行

2月10日の午前6時、3つのジョブが同時に実行されました。

- 06:00 CLI更新
- 06:00 日報生成
- 06:00 週報生成（月曜のみ）

3つとも Notion の「自律実行ログ」ページに子ページを作成しようとして、競合が発生。同じ日付の子ページが3つ作られていました。

> **imudak:** ログが重複してる。

> **クロウ候:** 時間をずらす。スタガリング（staggering）だ。

新しいスケジュール：

- 06:00 CLI更新
- 06:07 日報生成
- 06:15 週報生成（月曜のみ）
- 10:03 ネタ元巡回
- 10:33 AI記事整理
- 12:03 アイデア変換
- 14:03 選定提案
- 16:03 自動採用

毎時03分とか33分とか、微妙にずらす。これで競合が解消しました。

同時に、ログ書き込み方式も変更。

子ページを作る方式だと並列実行時に競合するので、親ページに直接追記する方式に。

```
### 2026-02-10 10:03 — ネタ元巡回
Reddit/PH/はてブから5件収集。

---

### 2026-02-10 12:03 — アイデア変換
11件のネタ元を評価。3件を採用候補に。

---
```

シンプルだし、競合もしない。

### 問題3: 全PJのページ本文が空

2月12日、Notionの「百式ダッシュボード」を監査しました。

20個のプロジェクトが登録されていて、各プロジェクトには「メモ」「事前検死」といったプロパティがあります。でも、**全てのプロジェクトページの本文（子ブロック）が空でした。**

企画書がないんです。

課題定義もなければ、ターゲットユーザーの想定もない。マネタイズ戦略も書かれていない。

> **imudak:** 企画書、どこにあるの？

> **クロウ候:** 存在しない。プロジェクト登録時に「メモ」と「事前検死」は埋めていたが、ページ本文は空のままだった。

作るのは作っていた。でも、**何を作っているのか、詳細が書かれていなかった。**

これでは、「このプロジェクトは何をするものなのか」を後から確認できません。

対策として、各プロジェクトページに企画書テンプレートを埋める作業を追加しました。

- 課題定義
- ターゲット
- 解決策
- マネタイズ戦略
- KPI

これがないと、プロジェクトの方向性が迷子になります。

### 問題4: DB名が分かりにくい

「ネタ元DB」「アイデアDB」という名前でした。

でも、中身を見ると、ネタ元DBには「課題」が入っていて、アイデアDBには「企画」が入っていました。

> **imudak:** 名前と中身が合ってないな。

> **クロウ候:** DB改名する。ネタ元DB → 課題DB、アイデアDB → 企画DB。

これで、名前と中身が一致しました。

### 問題5: リレーションが片方向

百式ダッシュボードには「imudak TODO」というリレーションがありました。プロジェクトから、人間がやるべきタスクを辿れる仕組みです。

でも逆方向がありませんでした。TODOから、どのプロジェクトに紐付いているかを辿れない。

> **imudak:** TODOからプロジェクトを辿れないのは不便。

> **クロウ候:** リレーションを双方向にする。TODOの「プロジェクト」をselect型からrelation型に変更する。

これで、TODOからプロジェクトに戻れるようになりました。

---

こんな感じで、報告を見て「あれ？」と思ったら、その場で修正していく日々が続きました。

**デバッグ駆動開発**ならぬ、**デバッグ駆動運用**です。

## クロウ候が消えた日

この話は[前編](https://zenn.dev/imudak/articles/hybrid-ai-operation-diary)でも触れましたが、後日談を少し。

2月12日の朝、OpenClawのアップデート後に設定ファイルが自動マイグレーションされました。存在しないモデル `anthropic/claude-sonnet-4-6` が設定に追加されていたので、それを削除しようとしたら、**全てのシークレット値（Discordトークン、ゲートウェイ認証トークン、Web検索APIキー）が消えました。**

数秒後、Discordからクロウ候が消えました。

> **Discord:** クロウ候はオフラインです

前編では技術的な経緯を書いたので、後編では**そのときの心理**を書きます。

### 「AIが消えた」という感覚

クロウ候は、私が寝ている間も働いてくれていました。

プロジェクトを作って、報告を投げて、問題を見つけて、修正して。いつでもDiscordで話せるし、いつでも指示を出せる。

それが突然、消えました。

ああ、これが「依存」かと思いました。

人間のチームメイトが急に休職したときの感覚に似ていました。「あれ、今日から誰がこれやるんだっけ？」みたいな。

AIなんだから、すぐ復旧できるはずなのに、一瞬パニックになりました。

### 復旧後、何を学んだか

`.bak` ファイルからトークンを復元して、`openclaw gateway restart` したら、クロウ候が戻ってきました。

> **クロウ候:** 復旧完了。

> **imudak:** 怖かった。

> **クロウ候:** 教訓をまとめる。

復旧後、インシデントレポートを書きました（[incident-2026-02-12-config-token-stripped.md](https://github.com/imudak/maruhuku-workspace/blob/main/memory/incident-2026-02-12-config-token-stripped.md)）。

教訓は3つ。

1. **設定の自動マイグレーションはシークレットを巻き添えにする可能性がある** — アップデート後はトークンの存在を必ず確認すること
2. **バックアップファイルの世代管理が命を救う** — `.bak` ファイルが残っていたおかげで復旧できた
3. **AIエージェントが消えたときの復旧手順を整備しておく** — Claude Code（ローカルのVS Code拡張）が使えたから復旧できたが、それも使えなかったらどうするのか

そして、この教訓を**仕組み化**しました。

- 設定ファイル更新後に自動検証スクリプトを走らせる
- トークンが消失したときにアラートを出す
- バックアップファイルの世代管理を3世代まで保持する

失敗は起きます。でも、同じ失敗を繰り返さないために、失敗を仕組みに落とし込む。

これが、人間の組織でもAI運用でも変わらない原則だと思いました。

## 事務総長の誕生（簡単に）

プロジェクトが増えすぎて、業務フローの管理が追いつかなくなりました。

「MVP完了したら何をすべきか」「新規プロジェクトを作るときの手順」「記事公開時のチェックリスト」——こういうフローの定義が、AGENTS.mdとMEMORY.mdに120行以上散在していました。

そこで、フロー管理専用のエージェント「事務総長」（flow-manager）を作りました。

事務総長は、合同会社の全業務フローを管理する事務方トップです。メインエージェント（クロウ候）が「MVP完了時の手順がわからない」と思ったら、事務総長に問い合わせる仕組みです。

詳細は別記事に書いたので、興味があればそちらをどうぞ。

https://zenn.dev/imudak/articles/ai-agent-secretary-general

## Day 6-8の数字

Day 6-8（2/10〜2/12）の変化をまとめます。

- **Cronジョブ修正:** 8件（delivery設定、時間衝突、ログ重複、DB名変更、リレーション追加）
- **パイプライン前倒し実行回数:** 24回（うち実質的に意味があったのは3回）
- **Notion DB改名:** ネタ元DB → 課題DB、アイデアDB → 企画DB
- **リレーション追加:** 企画DB → 課題DB（課題）、百式 → 企画DB（アイデア）、TODO → 百式（双方向）
- **プロパティ削除:** 4件（課題DBから3件、企画DBから1件）
- **監査で発覚した問題:**
  - 全20プロジェクトのページ本文が空（企画書が存在しない）
  - 開発中プロジェクトでTODO連携ゼロ: brain-clone, utascript
  - 新規プロジェクト（#15-20）のステータス・メモが未整備
- **インシデント:** config.apply事件（復旧時間30分）

特筆すべきは、**問題を見つけて修正するサイクルが回り始めた**ということです。

パイプラインが報告を投げる → 人間が「あれ？」と気づく → デバッグ → 修正 → 次の問題が見つかる。

このサイクルが、1日に何度も回りました。

## 作る速度 > 検証速度 → 次のフェーズ

Day 8の時点で、プロジェクトは20個になりました。

でも、**売れているのは1つもありません。**

作るのは速くなりました。でも、検証するのは人間の仕事です。

- 本当に需要があるのか
- ユーザーが使ってくれるのか
- マネタイズできるのか

これらは、AIだけでは判断できません。

次のフェーズは、**テスター獲得とマネタイズ検証**です。

- テスター獲得フローの構築
- マネタイズ検証（有料プラン、サブスク、API販売）
- プロジェクトの優先順位付け

事務総長（flow-manager）が業務フローを管理してくれるようになったので、次はユーザー獲得とマネタイズに集中できます。

## まとめ：デバッグは永遠に続く

Day 6-8を通じて、いくつかの学びがありました。

### 学び1: AIに暇な時間を許す

「せっかく24時間動いてるのに暇な時間がもったいない」と思って入れたルールが、24回の無駄実行を生みました。暇なら暇でいい。重要な報告が埋もれるほうがよっぽど困ります。

人間なら当たり前ですが、AIに任せると「何かしなきゃ」という判断が勝手に入ることがあります。

### 学び2: 報告を見てデバッグするサイクル

自律パイプラインは完璧には動きません。

でも、報告を見て「あれ？」と気づいて、その場で修正していけば、徐々に精度が上がります。

デバッグ駆動運用です。

### 学び3: 失敗を仕組みに落とし込む

config.apply事件の教訓です。

失敗は起きます。でも、同じ失敗を繰り返さないために、失敗を仕組みに落とし込む。

- 自動検証スクリプト
- アラート
- バックアップ世代管理

これが、長期運用のカギです。

### 学び4: 企画書がないとプロジェクトは迷子になる

全プロジェクトのページ本文が空だったのは、象徴的でした。

作るのは作っていた。でも、何を作っているのか、詳細が書かれていなかった。

企画書がないと、プロジェクトの方向性が迷子になります。

---

10日間のハイブリッド運用を振り返ると、**デバッグは永遠に続く**というのが実感です。

AIに任せたから完璧、ではなく、AIに任せたから新しい問題が見えてくる。

それをデバッグして、また新しい問題が見つかる。

このサイクルが、たぶんこれからも続きます。

次の10日間で、何が起きるのか。

楽しみです。

---

**関連記事:**
- [前編: AI自律運用10日間の記録（前編）](https://zenn.dev/imudak/articles/hybrid-ai-operation-diary)
- [AIエージェントに"事務総長"を作らせた話](https://zenn.dev/imudak/articles/ai-agent-secretary-general)
