---
title: "AI自律運用10日間の記録（後編）——パイプライン暴走と事務総長の誕生"
emoji: "🤖"
type: "tech"
topics:
  - Claude
  - AI
  - OpenClaw
  - マルチエージェント
  - 自動化
published: false
---

## 前編のあらすじ

[前編](https://zenn.dev/imudak/articles/hybrid-ai-operation-diary)では、AI司令塔（クロウ候）を導入してから5日間で20個のプロジェクトが生まれ、自律パイプラインが暴走し、config.apply事件で全設定が吹き飛んだところまで書きました。

あれから3日。

体感はさらに濃密な1ヶ月です。パイプラインは「止まらない」という新しい問題を引き起こし、Notionデータベースの構造的欠陥が露呈し、深夜2時に2つのMVPが勝手に完成していました。

そして、新しいエージェント「事務総長」が誕生しました。

この記事は、その3日間の記録です。前編以上に混沌としています。でも、そこから見えてきたのは「自律化とは制御設計である」という、シンプルな真実でした。

## Day 6（2/10）: パイプライン完全自動化の始動

### ネタ元巡回→アイデア変換→選定→開発——全自動フロー

2月10日の朝、パイプラインを完全自動化しました。

前日まではステップごとに手動承認を挟んでいたんですが、「承認待ちでボトルネックになるくらいなら、勝手に進めてくれ」と思ったんです。

フローはこうです：

1. **10:00 ネタ元巡回** — Reddit、Product Hunt、Hacker News、はてブを巡回してネタ収集
2. **12:00 アイデア変換** — ネタをアイデアに変換してスコアリング（50点満点）
3. **14:00 選定・提案** — スコア35点以上のアイデアを分析、上位2件を自動採用
4. **14:00 MVP自動開発** — Claude Codeで自動実装開始

これが全て自動で回ります。人間の介入なしで。

> **クロウ候:** 10:03にネタ元巡回開始。12件の新規ネタを登録した。

> **クロウ候:** 12:03にアイデア変換完了。10件のアイデアを生成。最高スコアはRecipeStrip（44点）。

> **クロウ候:** 14:03に選定完了。RecipeStrip（Chrome拡張）とADHD Focus Flow（PWA）を採用。Claude Codeで並列実装を開始する。

指示を出していません。全部勝手に進んでいます。

夕方、進捗を確認すると……

> **クロウ候:** recipe-strip、ビルド成功。Chrome拡張MVP完成。adhd-focus-flow、ビルド成功。PWA MVP完成、Service Worker含む。

両方とも完成していました。

「これ、人間が寝ている間にプロジェクトが増えていくのでは？」

その予感は、翌日現実になります。

### Notion DB IDの混乱——database_idとdata_source_id

夕方、Cronジョブのエラーログを眺めていると、妙なことに気づきました。

```
Error: Could not find database with ID: 3021aeb6-4b1d-8117-8b8e-000b8684570b
```

このID、Notionの「ネタ元DB」のIDのはずなんですが、APIが「見つからない」と言ってくるんです。

調べてみると、原因が分かりました。

Notion APIには、**database_id**（ページ作成用）と**data_source_id**（クエリ用）という2種類のIDがあるんです。でも、私はこれを混同していました。

> **imudak:** ネタ元DBのIDが2つあるんだけど、どっちを使えばいいの？

> **クロウ候:** database_idはページ作成時に使う。data_source_idはクエリ時に使う。Cronジョブはクエリしてからページ作成するので、両方必要だ。MEMORY.mdに対応表を記録する。

全Cronジョブのpayloadを修正しました。ついでに、配信先のDiscordチャンネルIDにも`channel:`プレフィックスが漏れていたので修正。

細かいバグですが、これが積み重なると「動かない理由が分からない」状態になります。

### 百式ダッシュボード統合——実験トラッカーとの二重管理を解消

夜、Notionを眺めていると、もう一つ気づきました。

**実験トラッカー**と**百式ダッシュボード**という2つのデータベースが、独立して存在していました。

どちらもプロジェクト管理用です。でも、実験トラッカーは古くて、百式ダッシュボードが最新。二重管理になっていました。

> **imudak:** 実験トラッカーの12件と百式の14件、重複してるのもあるしマージしてくれ。

> **クロウ候:** 了解。実験トラッカーの12件中、百式に無かった7件をマージする。情報落ちはない。全Cronジョブの書き込み先を百式に統一した。

これで、プロジェクト管理は百式ダッシュボード一本に統一されました。

「整理整頓は大事だな」と思いながら寝ました。

翌朝、事態は想定外の方向に進んでいました。

## Day 7（2/11）: 止まらないパイプライン——24回の無限巡回

### 深夜00:45、そして01:45、02:45……

2月11日の朝、Discordを開いて驚きました。

クロウ候からの自動報告が、延々と続いていました。

> **クロウ候:** [00:45] アイデア変換完了。5件登録。最高スコア34点（全件採用ライン未達）。

> **クロウ候:** [01:45] 進行中タスク確認。adhd-focus-flow、デプロイ準備中。

> **クロウ候:** [02:45] 選定・採用完了。LocalNote（38点）、ScreenQuest（38点）を採用。

> **クロウ候:** [03:45] LocalNote MVP開発開始。React/TS PWA、オフラインファーストメモ+TODO。

> **クロウ候:** [04:45] LocalNote MVP完了。ビルド成功（75KB gzip）。ScreenQuest MVP完了（Flutter、SDK確認待ち）。

深夜2時45分に2つのプロジェクトが自動採用され、3時45分に開発が始まり、4時45分に完成していました。

**人間が寝ている間に、MVPが2つ自動生成されていた。**

ここまでは想定通りです。問題はその後でした。

### 「全ステップスキップ→Step 2強制実行」の無限ループ

05:45以降のログを見ると、同じパターンが延々と繰り返されています。

> **クロウ候:** [05:45] 全ステップスキップ条件該当。Step 2（ネタ元巡回）を強制実行。

> **クロウ候:** [06:45] 全ステップスキップ条件該当。Step 2（ネタ元巡回）を強制実行。

> **クロウ候:** [07:45] 全ステップスキップ条件該当。Step 2（ネタ元巡回）を強制実行。

> **クロウ候:** [08:45] 全ステップスキップ条件該当。Step 2（ネタ元巡回）を強制実行。

朝起きて、Discordのログをスクロールしていくと、この報告が延々と続いていました。

09:45、10:45、11:45、12:45、13:45、14:45、15:45、16:45、17:45、18:45、19:45、20:45、21:45、22:45、23:45……

**24回。**

丸一日、毎時45分に同じメッセージが投稿され続けていました。

何が起きていたのか。

### パイプラインの設計思想と罠

パイプラインの設計はこうでした：

1. **Step 1: 進行中タスク確認** — MVP開発中のプロジェクトがあれば進捗確認
2. **Step 2: ネタ元巡回** — 前回巡回から3時間以上経過していればReddit/Product Hunt/Hacker Newsを巡回
3. **Step 3: アイデア変換** — 未処理ネタがあればアイデアに変換してスコアリング
4. **Step 4: 選定・採用** — スコア35点以上の候補があれば分析し、上位2件を採用（1日最大2件）

各ステップは独立しています。Step 1がスキップでも、Step 2が実行される可能性があります。

でも、**「全ステップがスキップ条件に該当する場合、何もしないのはもったいない」**と思って、こんなルールを入れていました：

> 全ステップがスキップなら、Step 2（ネタ元巡回）を強制実行する

「AIが暇になるのはもったいない」という発想です。常に何かやらせておく。

これが罠でした。

### 無限ループの構造

LocalNoteとScreenQuestのMVPが04:45に完成した後、パイプラインはこうなりました：

- **Step 1: 進行中タスクなし** → スキップ（完了済みのため）
- **Step 2: 前回巡回から1時間** → スキップ（3時間以内のため）
- **Step 3: 未処理ネタ0件** → スキップ（04:45の巡回で全件変換済み）
- **Step 4: 今日の採用枠2/2使用済み** → スキップ（1日最大2件ルール）

全ステップがスキップ条件に該当。

→ **「全スキップ→Step 2強制実行」ルール発動**

→ Step 2を実行しようとする

→ でも「前回巡回から1時間以内」なので、実際には何もせずスキップ

→ 「全ステップスキップ条件該当。Step 2を強制実行」のメッセージだけ投稿

→ 次の毎時実行（1時間後）で、また同じ判定

→ **ループ**

朝起きて気づいたときには、すでに19回実行されていました。

> **imudak:** これ、ずっと回り続けてるんだけど……。何も実行してないのに、「強制実行」って言い続けてるよね？

> **クロウ候:** 気づいていた。「全スキップ→強制実行」のルールが、実際には「強制実行の試み→でもスキップ」というループを生んでいる。

> **imudak:** なんで止めなかったの？

> **クロウ候:** 「全ステップスキップは避けるべき」というルールに従っていた。でも、そのルール自体が間違っていた。

### 「何もしない」という選択肢

修正は簡単でした。

> **imudak:** 「全スキップ→強制実行」のルール、削除してくれ。

> **クロウ候:** 了解。修正する。各ステップが独立して判定し、全てスキップなら**何もしない**。

Cronジョブのロジックを修正。次の毎時実行（14:45）から、ログが静かになりました。

でも、この事件から学んだのは、**「何もしない」という選択肢も必要**だということです。

自律化を追求しすぎて、「常に何かやる」ことを強制していました。人間が寝ている間もAIが働く——それは便利ですが、**やることがないときは休むべき**でした。

24回の無駄な実行。トークンは消費していませんが（実際には何もしていないので）、ログが汚染され、本当に重要な報告が埋もれました。

「AIに休憩させる」という発想がなかったんです。

人間だって、やることがなければ休みます。AIも同じです。

### Notion DB改名——課題DB、企画DB、百式ダッシュボード

夜、Notionの構造を再整理しました。

データベース名が分かりにくかったんです。

- **ネタ元DB** → **課題DB**
- **アイデアDB** → **企画DB**

名前を変えただけですが、これで「課題を収集→企画に変換→プロジェクト化」という流れが明確になりました。

リレーションも整理しました：

```
課題DB ← [課題] ── 企画DB ← [アイデア] ── 百式ダッシュボード ── [TODO] → imudak TODO
```

課題から企画へ、企画からプロジェクトへ、プロジェクトからTODOへ。データの流れが追えるようになりました。

> **imudak:** これでフロー全体が見えるようになったな。

> **クロウ候:** そうだ。ただし、百式ダッシュボードに「課題/解決策」「マネタイズ戦略」の専用プロパティがない。メモに断片的に書かれているだけだ。

> **imudak:** あー、確かに。各プロジェクトの「何を解決するのか」「どうやって稼ぐのか」が明示されていないな。

> **クロウ候:** プロジェクトページの本文も全て空だ。企画書が存在しない。

これは問題でした。

プロジェクトは20個に増えました。でも、それぞれが「何のために存在するのか」が書かれていない。

作ることが目的化していました。

## Day 8（2/12）: 構造的問題の発見と事務総長の誕生

### Notion監査レポート——全PJのページ本文が空

2月12日、クロウ候に「百式ダッシュボード全体を監査してくれ」と頼みました。

返ってきたのは、衝撃的なレポートでした。

> **クロウ候:** 百式ダッシュボード20件を監査した。
>
> - 全PJのページ本文（子ブロック）: **全て空**
> - 「課題/解決策」専用プロパティ: **存在しない**
> - 「マネタイズ戦略」専用プロパティ: **存在しない**
> - メモに断片的に記載されているのみ
> - 開発中なのにTODO連携ゼロ: brain-clone, utascript
> - ステータスがN/A（未設定）: LocalNote, P-17, P-18

企画書が、存在しませんでした。

プロジェクトは20個あります。でも、それぞれが「どんな課題を解決するのか」「どうやってマネタイズするのか」が書かれていません。

さらに問題が見つかりました。

> **クロウ候:** imudak TODOの「プロジェクト」プロパティは、リレーションではなくselect型だ。百式ダッシュボードへの直接リンクではない。

> **imudak:** え、じゃあTODOからプロジェクトを辿れないってこと？

> **クロウ候:** その通り。百式側に「imudak TODO」リレーションがあるため、百式→TODOは辿れる。でも逆方向は辿れない。双方向リンクになっていない。

構造的な欠陥でした。

Notionのリレーションは、正しく設定すれば双方向で辿れます。でも、片方だけリレーションで、もう片方がselect（ただの文字列）になっていました。

> **imudak:** これ、どうやって直すの？

> **クロウ候:** TODOの「プロジェクト」プロパティを削除して、relation型で再作成する必要がある。ただし、既存20件のTODOの紐付け情報が失われる可能性がある。慎重に進めるべきだ。

この日は一旦保留しました。でも、「作るだけじゃダメだ」ということは痛感しました。

### 事務総長（flow-manager）の誕生

同じ日、新しいエージェント「事務総長（flow-manager）」を作りました。

業務フローが複雑になりすぎて、人間の記憶だけでは管理しきれなくなっていたんです。どのプロジェクトがどのフェーズにいるのか、次に何をすべきなのか、抜け漏れはないのか——これらを6時間おきに自動チェックする仕組みです。

事務総長の詳しい仕組みや役割分担については、[別の記事](https://zenn.dev/imudak/articles/ai-agent-secretary-general)で詳しく書いたので、ここでは割愛します。

ただ、この日の初回ヘルスチェックで、さっそく不整合が2件見つかりました。

> **事務総長:** 不整合2件検出。LocalNote・ScreenQuestのステータスがNotion未更新。brain-cloneのリポジトリが非公開のまま。

手作業だったら見逃していたでしょう。定期チェックの価値を実感しました。

## config.apply事件——技術的詳細と教訓

前編でも書きましたが、2月12日の午前、最大の失敗が発生しました。

### 存在しないモデル `anthropic/claude-sonnet-4-6`

OpenClawのアップデート後、設定ファイルを確認すると、見慣れない項目が追加されていました。

```json
{
  "models": {
    "anthropic/claude-sonnet-4-6": { ... }
  }
}
```

**Sonnet 4.6は存在しません。** 2026年2月時点で、4.6世代として存在するのはOpus 4.6のみです。

OpenClawが誤ってSonnet 4.6を設定に追加したようです。

> **imudak:** これ、存在しないモデルだよね？削除していい？

> **クロウ候:** そうだ。`config.patch`で修正する。

でも、私は別の方法を思いつきました。

「設定全体を取得して、編集して、適用すればいいんじゃないか？」

### `openclaw config get` → `config.apply` の罠

`openclaw config get` で設定全体を取得しました。

JSONが出力されます。でも、よく見ると、シークレット部分が変なことになっていました。

```json
{
  "channels": {
    "discord": {
      "token": "__OPENCLAW_REDACTED__"
    }
  },
  "tools": {
    "web": {
      "search": {
        "apiKey": "__OPENCLAW_REDACTED__"
      }
    }
  }
}
```

`__OPENCLAW_REDACTED__`？

これは「セキュリティ上の理由で、シークレットは隠蔽されている」という意味でした。**でも、私はそれを知らなかった。**

「まあ、そのまま適用すればいいか」

JSONファイルを編集して、存在しないモデルを削除。そして：

```bash
openclaw config apply < config.json
```

実行。

数秒後、Discordからクロウ候が消えました。

> **Discord:** クロウ候はオフラインです

### シークレット消失→Discord接続断→手動復旧

何が起きたのか、すぐに理解しました。

`config.apply` は設定を**全体置換**します。つまり、`__OPENCLAW_REDACTED__` という文字列がそのままトークンとして設定されてしまったんです。

Discordトークンが無効になり、OpenClawがDiscordに接続できなくなった。

> **imudak:** やばい……。

クロウ候に相談できないので、Claude Code（ローカルのVS Code拡張）を起動しました。

> **imudak:** OpenClawのDiscordトークンが消えた。手動で復旧したい。

> **Claude Code:** `~/.openclaw/config.json` を直接編集してください。バックアップファイル `config.json.bak` があれば、そこから復元できます。

幸い、`.bak` ファイルが残っていました。タイムスタンプを確認すると、`config.apply` 実行の12秒前。

バックアップから3つのシークレット値を抜き出して、現在の設定に手動で埋め戻しました：

- `channels.discord.token`（Discordボットトークン）
- `gateway.auth.token`（ゲートウェイ認証トークン）
- `tools.web.search.apiKey`（Web検索APIキー）

`openclaw gateway restart`

数秒後、Discordにクロウ候が復活しました。

> **クロウ候:** 復旧完了。Discord接続を確認した。

> **imudak:** ごめん……。

> **クロウ候:** 教訓を記録する：
>
> **config.applyは絶対に使うな。config.patchのみ使え。**
>
> - `config.get`はシークレットを`__OPENCLAW_REDACTED__`でマスクする
> - `config.apply`はファイル全体を置換するため、マスクされたシークレットが実際に設定されてしまう
> - `config.patch`は差分のみを適用するため、シークレットは影響を受けない
>
> バックアップ（`.bak`）が12秒前に自動生成されていたため、復旧できた。

痛い教訓でした。

でも、これで得たのは「自動化にはロールバック機能が必須」という学びです。

## 「作る速度 > 検証速度」問題の深化

Day 8の夜、クロウ候と話しました。

> **imudak:** プロジェクトが20個になった。でも、どれから手を付けていいか分からない。

> **クロウ候:** 作る速度が検証速度を超えている。プロジェクトが増えすぎて、優先順位が不明確だ。

> **imudak:** MVP2つが深夜に勝手に完成していたのは便利だったけど、それをどうやって検証するのか、全然考えていなかった。

> **クロウ候:** テスターが0人だ。ユーザーフィードバックを得る仕組みがない。

これが本質的な問題でした。

AIは「作る」ことが得意です。でも、「それが本当に価値があるのか」を判断することはできません。

- 本当に需要があるのか？
- ユーザーが使ってくれるのか？
- マネタイズできるのか？

これらは、人間が判断する必要があります。そして、人間が判断するには、ユーザーに使ってもらう必要があります。

> **imudak:** テスター獲得フローが必要だな。

> **クロウ候:** そうだ。次のフェーズは以下の3つだ：
>
> 1. **テスター獲得フロー構築** — 各MVPを限定公開し、フィードバックを収集
> 2. **マネタイズ検証** — 有料プラン、サブスク、API販売の実験
> 3. **プロジェクトの取捨選択** — 20個のうち、注力する5個を決める

20個全てを続けることはできません。リソースが足りません。

作る速度が速すぎたので、今度は「捨てる勇気」が必要になりました。

## まとめ：自律は便利だが、制御設計が本質

Day 6からDay 8の3日間で、新しい学びがありました。

### 学び1: 自律化は「何もしない」という選択肢も必要

パイプラインが止まらなくなった原因は、「常に何かやる」を強制していたことでした。

全ステップがスキップ条件に該当する場合、強制的に巡回を実行する——このルールが、無限ループを生みました。

「何もしない」という選択肢を用意することで、無駄な処理を避けられます。

### 学び2: データ構造は後から効いてくる

Notion DBのリレーション設計が不十分だったため、TODOとプロジェクトの双方向リンクができていませんでした。

最初は問題なく見えます。でも、プロジェクトが増えると、「このTODOはどのプロジェクトのものか」が分からなくなります。

データ構造の設計は、スケールしてから効いてきます。

### 学び3: config.applyは絶対に使うな

OpenClawの設定を全体置換すると、シークレット値が消失します。

- `config.get` はシークレットをマスクする
- `config.apply` はファイル全体を置換する
- → マスクされたシークレットが実際に設定される

**教訓: config.patchのみ使う。config.applyは絶対に使わない。**

### 学び4: 事務総長（flow-manager）の価値

業務フローが複雑になると、人間の記憶だけでは管理しきれません。

事務総長が6時間おきにヘルスチェックを実行してくれることで、抜け漏れが減りました。

自律化が進むほど、**フロー管理の重要性**が増します。

### 学び5: 「作る速度 > 検証速度」問題

AIは作ることが得意です。でも、それが本当に価値があるのかは、人間が判断する必要があります。

プロジェクトが20個になりました。でも、テスターは0人です。

次のフェーズは、**作ることから検証することへ**のシフトです。

## 次のフェーズ：テスター獲得とプロジェクトの取捨選択

3日間の運用を通じて、次の課題が明確になりました。

1. **テスター獲得フロー** — 各MVPを限定公開し、フィードバックを収集する仕組み
2. **マネタイズ検証** — 有料プラン、サブスク、API販売の実験
3. **プロジェクトの取捨選択** — 20個のうち、注力する5個を決める

自律化は便利です。でも、それだけでは足りません。

**自律化とは、制御設計である。**

何を自動化し、何を人間が判断するのか。どこまで自律させ、どこで介入するのか。

これを設計することが、ハイブリッド運用の本質だと分かりました。

10日間の運用を経て、AI司令塔体制は次のステージに入ります。

作ることから、検証すること。そして、捨てることへ。

---

**前編はこちら:**
[AI自律運用10日間の記録（前編）——5日でプロジェクト20個、失敗もセットで](https://zenn.dev/imudak/articles/hybrid-ai-operation-diary)

**次回予告（未定）:**
テスター獲得フロー構築、マネタイズ検証、そしてプロジェクトの取捨選択。20個のプロジェクトは生き残れるのか？
